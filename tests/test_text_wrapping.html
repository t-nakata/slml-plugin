<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Wrapping Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    h1, h2 {
      color: #2c3e50;
    }
    .test-case {
      margin-bottom: 30px;
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 4px;
    }
    .code {
      background-color: #f5f5f5;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 10px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    .result {
      background-color: #f9f9f9;
      padding: 15px;
      border-radius: 4px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Text Wrapping Test</h1>
    <p>This page tests the text wrapping functionality of the Text element.</p>

    <div class="test-case">
      <h2>Test Case 1: Short Text</h2>
      <div class="code">```slml
Screen: Short Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a short text that should not wrap.
```</div>
      <div class="result" id="result1"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 2: Medium Text</h2>
      <div class="code">```slml
Screen: Medium Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a medium length text that should wrap to two or three lines depending on the screen width and font size.
```</div>
      <div class="result" id="result2"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 3: Long Text</h2>
      <div class="code">```slml
Screen: Long Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a long text that should definitely wrap to multiple lines. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl.
```</div>
      <div class="result" id="result3"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 4: Japanese Text</h2>
      <div class="code">```slml
Screen: Japanese Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: パスワードは、大小英数字、記号を含む8文字以上の文字列を指定してください。
```</div>
      <div class="result" id="result4"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 5: Custom Width</h2>
      <div class="code">```slml
Screen: Custom Width Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom width of 300px, which should affect how it wraps. { width: 300 }
```</div>
      <div class="result" id="result5"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 6: Custom Font Size</h2>
      <div class="code">```slml
Screen: Custom Font Size Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom font size of 18px, which should affect how it wraps and its overall appearance. { fontSize: 18 }
```</div>
      <div class="result" id="result6"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 7: Custom Font Color</h2>
      <div class="code">```slml
Screen: Custom Font Color Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom color of blue, which should make it stand out. { color: #0000FF }
```</div>
      <div class="result" id="result7"></div>
    </div>

    <div class="test-case">
      <h2>Test Case 8: Combined Font Properties</h2>
      <div class="code">```slml
Screen: Combined Font Properties (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has both custom size (20px) and color (red), with a custom width of 250px. { fontSize: 20, color: #FF0000, width: 250 }
```</div>
      <div class="result" id="result8"></div>
    </div>
  </div>

  <script type="module">
    // Import the parser and renderer
    import { processMarkdown } from '../parser.js';
    import { renderSLMLToSVG } from '../renderer.js';

    // Test cases
    const testCases = [
      {
        id: 'result1',
        slml: `Screen: Short Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a short text that should not wrap.`
      },
      {
        id: 'result2',
        slml: `Screen: Medium Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a medium length text that should wrap to two or three lines depending on the screen width and font size.`
      },
      {
        id: 'result3',
        slml: `Screen: Long Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This is a long text that should definitely wrap to multiple lines. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl. Nullam auctor, nisl eget ultricies tincidunt, nisl nisl aliquam nisl, eget ultricies nisl nisl eget nisl.`
      },
      {
        id: 'result4',
        slml: `Screen: Japanese Text Example (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: パスワードは、大小英数字、記号を含む8文字以上の文字列を指定してください。`
      },
      {
        id: 'result5',
        slml: `Screen: Custom Width Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom width of 300px, which should affect how it wraps. { width: 300 }`
      },
      {
        id: 'result6',
        slml: `Screen: Custom Font Size Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom font size of 18px, which should affect how it wraps and its overall appearance. { fontSize: 18 }`
      },
      {
        id: 'result7',
        slml: `Screen: Custom Font Color Text (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has a custom color of blue, which should make it stand out. { color: #0000FF }`
      },
      {
        id: 'result8',
        slml: `Screen: Combined Font Properties (width: 500, height: 300, backgroundColor: #f5f5f5)
- Text: This text has both custom size (20px) and color (red), with a custom width of 250px. { fontSize: 20, color: #FF0000, width: 250 }`
      }
    ];

    // Render all test cases
    window.addEventListener('DOMContentLoaded', () => {
      testCases.forEach(testCase => {
        try {
          const parsedScreen = processMarkdown(testCase.slml)[0];
          const svg = renderSLMLToSVG(parsedScreen, 0.6);
          document.getElementById(testCase.id).innerHTML = svg;
        } catch (error) {
          console.error(`Error rendering test case ${testCase.id}:`, error);
          document.getElementById(testCase.id).innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
        }
      });
    });
  </script>
</body>
</html>
